[{"path":"https://brbackes.github.io/vamR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 Ben Backes Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://brbackes.github.io/vamR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ben Backes. Author, maintainer.","code":""},{"path":"https://brbackes.github.io/vamR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Backes B (2024). vamR: Teacher Value Added Calculator. R package version 0.0.0.9009, https://brbackes.github.io/vamR/.","code":"@Manual{,   title = {vamR: Teacher Value Added Calculator},   author = {Ben Backes},   year = {2024},   note = {R package version 0.0.0.9009},   url = {https://brbackes.github.io/vamR/}, }"},{"path":[]},{"path":"https://brbackes.github.io/vamR/index.html","id":"installation","dir":"","previous_headings":"VAM R Package","what":"Installation","title":"Teacher Value Added Calculator","text":"use development version (version), can install GitHub : corporate Windows environment proxy issues prevent using pak, can also try:","code":"if (!require(\"pak\")) install.packages(\"pak\") pak::pak(\"brbackes/vamR\") if (!require(\"remotes\")) install.packages(\"remotes\") remotes::install_github(\"brbackes/vamR\", method = \"wininet\")"},{"path":"https://brbackes.github.io/vamR/index.html","id":"usage-short","dir":"","previous_headings":"VAM R Package","what":"Usage (short)","title":"Teacher Value Added Calculator","text":"Example usage: Please see help file typing ?vam R.","code":"returned <- vam(   by = c(\"lvl\", \"subject\"),    data = df_prepped,    controls = controls,    teacher = \"mepid\",   class = \"section_id\",   year = \"syear\",   tfx_resid = \"mepid\",    driftlimit = 7,   y = \"test\",   quasi = FALSE,   return_df_only = FALSE,   tv_name = \"tv\",   scores_name = \"score_r\" )"},{"path":"https://brbackes.github.io/vamR/index.html","id":"how-can-we-know-that-vamado-and-vamr-produce-identical-results","dir":"","previous_headings":"VAM R Package","what":"How can we know that vam.ado and vamR produce identical results?","title":"Teacher Value Added Calculator","text":"Whenever package checked, automatically runs test ensures identical output across vamR vam.ado. test estimates teacher value-added subject (math ELA) level (elementary middle) Massachusetts using data grades 4-8 2012-2022 raises error changes package cause output vamR differ vam.ado. Stata .file prepares data runs vam.ado .R file loads data, runs vamR, compares output vam.ado test raises error correlation value-added estimates vam.ado vamR less 0.99999 subject-level combination test raises error number non-missing teacher-year-subject-level value-added estimates differs across vam.ado vamR test raises error results CFR quasi-experimental test using changes achievement versus leave-two-value-added school-grade-subject-year cells differ across Stata R (tolerance = 0.0001) Note underlying data live secure server; share upload data","code":""},{"path":"https://brbackes.github.io/vamR/index.html","id":"usage-longer","dir":"","previous_headings":"VAM R Package","what":"Usage (longer)","title":"Teacher Value Added Calculator","text":"trick replicating Stata’s vam.ado output making sure residualization regression R’s fixest gives exact output Stata’s areg (ignoring constant term displayed fixest fixed effects). sounds obvious, complicated set covariates interactions, always trivial. example workflow worked . Note saving .csv Stata using fread read dataset much faster reading .dta file R haven. course, relevant used Stata clean prepare data, want compare output vam.ado vamR. Preparing set covariates: verify output fixest (vamR uses hood). , split needs included ’re going include something () portion vam. output (.e., coefficients number observations) group identical Stata’s areg absorbing teacher ID controls interaction terms. case output vam.ado vamR differ. make sure output identical, ’ve found helpful manually specify omitted group (e.g., (syear, ref = 2018)). Otherwise, fixest can strange things omitted groups interaction terms. can check omitted group used areg running regression areg just assuming ’ll omit first group.","code":"df <- data.table::fread(\"1_data/output/vam_merge_for_va.csv\")  # prepare covariates: higher-order polynomials and grade*year interaction df_prepped <- df %>%   mutate(     lag_mat_2 = lag_mat_nce ^ 2,     lag_mat_3 = lag_mat_nce ^ 3,     lag_ela_2 = lag_ela_nce ^ 2,     lag_ela_3 = lag_ela_nce ^ 3,     lag_std_noncog_factor_2 = lag_std_noncog_factor ^ 2,     lag_std_noncog_factor_3 = lag_std_noncog_factor ^ 3,     scx_voc2 = scx_voc ^ 2,     scx_voc3 = scx_voc ^ 3   ) %>%   group_by(grade, syear) %>%   mutate(grade_year = cur_group_id() %>% as_factor()) %>%   ungroup()  # some individual-level covariates that will be interacted with school year and subject controls_ind <- df_prepped %>%   dplyr::select(     starts_with(\"lag_mat_\"),     starts_with(\"lag_ela_\"),     starts_with(\"lag_std_noncog_\")     ) %>%   tbl_vars()    # some individual-level covariates that will be interacted with subject only controls_ind2 <- df_prepped %>%   dplyr::select(     starts_with(\"vb_\"),     starts_with(\"sped\"),     lep, male, frl, adv_math, art_elec, fgn_lang, supp_crs, esl_crs,     grade_year   ) %>%   tbl_vars()  # same stuff for class-level controls. Specifying separately like this # can be helpful when estimating different models that have different sets of covariates controls_class <- df_prepped %>%   dplyr::select(      crx_lag_mat_nce, crx_lag_ela_nce, crx_lag_std_noncog_factor     ) %>%   tbl_vars()  controls_class2 <- df_prepped %>%   dplyr::select(      starts_with(\"crx_vb_\"),     starts_with(\"crx_sped\"),     crx_lep, crx_male, crx_frl     ) %>%   tbl_vars()  # here is how to mash everything together with different sets of interactions with different sets of controls reg_controls <-    c(     paste(paste(\"i(syear, ref = 2018) * i(subject, ref = 'ELA') * \", c(controls_ind, controls_class))),     paste(paste(\"i(subject, ref = 'ELA') * \", c(controls_ind2, controls_class2)))   ) %>%   reformulate() model <- fixest::feols(outcome ~ .[reg_controls] | teacher_id, data = df_prepped, split = ~.group_id)"},{"path":"https://brbackes.github.io/vamR/index.html","id":"some-more-tips","dir":"","previous_headings":"VAM R Package","what":"Some more tips","title":"Teacher Value Added Calculator","text":"R complains anything related interaction terms (*) specified, try making sure fixest package loaded library(fixest).","code":""},{"path":"https://brbackes.github.io/vamR/index.html","id":"why-is-it-faster","dir":"","previous_headings":"VAM R Package","what":"Why is it faster?","title":"Teacher Value Added Calculator","text":"anyone curious, look hood things faster fixest vam.ado. Annecdotally, ’ve found vamR 5-10 times faster vam.ado, larger speed gains coming () groups included residualization regression complicated, especially interaction terms. getting , note vam.ado extremely well-written given constraints time (Stata package written 2013); criticism! package exist vam.ado weren’t () useful (b) clearly written. fixest much, much faster areg calculations use data.table backend, extremely fast collapsing manipulating data calculation tv performed using Rcpp","code":""},{"path":"https://brbackes.github.io/vamR/index.html","id":"acknowledgements","dir":"","previous_headings":"VAM R Package","what":"Acknowledgements","title":"Teacher Value Added Calculator","text":"Thank Michael Stepner guidance provided vam.ado James Cowan help using fixest complicated regressors.","code":""},{"path":"https://brbackes.github.io/vamR/reference/vam.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Teacher Value-Added — vam","title":"Estimate Teacher Value-Added — vam","text":"program uses student-level outcomes (typically test scores) compute teacher value-added (VA) measures. estimation procedure accounts drift teacher VA time. package based Michael Stepner's Stata program intended produce identical results speed gains made possible R.","code":""},{"path":"https://brbackes.github.io/vamR/reference/vam.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Teacher Value-Added — vam","text":"","code":"vam(   y = NULL,   teacher = NULL,   year = NULL,   class = NULL,   controls = NULL,   by = NULL,   tfx_resid = NULL,   absorb = NULL,   driftlimit = NULL,   data = NULL,   quasi = FALSE,   tv_name = \"tv\",   scores_name = \"score_r\",   cfr_test = FALSE,   cfr_school = NULL,   cfr_grade = NULL,   cfr_subject = NULL,   cfr_weight = NULL,   return_df_only = FALSE,   return_cfr_test_only = FALSE )"},{"path":"https://brbackes.github.io/vamR/reference/vam.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Teacher Value-Added — vam","text":"y Required. outcome variable quotations. teacher Required. name teacher identifier quotations. year Required. name year identifier quotations. class Required. name classroom identifier quotations. controls Controls used residualization. Perform VA estimation separately -group. Ex = c(\"subject\", \"level\"). tfx_resid Absorb fixed effects y residualization, include fixed effects residual. absorb Residualize y absorbed fixed effects. driftlimit Estimate # autocovariances; set autocovariances equal last estimate. data Required. Data frame use. quasi Default FALSE. Generates two additional leave-VA measures, typically used quasi-experimental tests. option adds tv_2yr_l, leaves forecast year prior year, tv_2yr_f, leaves forecast year following year. Note tv_name specified, names also apply _2yr_f _2yr_l variables. tv_name Default \"tv\". String denoting name value-added forecast. scores_name Default \"score_r\". String denoting name score residual. cfr_test Default FALSE. Conducts CFR quasi-experimental test forecast bias value-added estimates. Collapses data school-grade-year-subject cells average y average value-added. Regresses change y change leave-value-added, using 2-year leave-outs generated quasi command CFR. Regression includes year fixed effects clusters standard errors school-cohort. TRUE, must specify cfr_school, cfr_grade, cfr_subject data can collapsed appropriately. TRUE, quasi estimates automatically calculated. cfr_school Required cfr_test TRUE. Name school variable used collapse cfr_test. used value-added calculations. cfr_grade Required cfr_test TRUE. Name grade variable used collapse cfr_test. used value-added calculations. cfr_subject Required cfr_test TRUE. Name subject variable used collapse cfr_test. used value-added calculations. cfr_weight Optional cfr_test TRUE. Name teacher weight variable used collapse cfr_test (typically teacher dosage variable greater 0 greater 1). used value-added calculations. return_df_only Default FALSE. TRUE, return original dataframe value-added residuals appended. FALSE, return list () original df value-added residuals, (b) variance estimates, (c) autocovariances lag, (d) teacher-year-() dataset value-added estimates. Note (d) include teacher estimates years originally present data: difference Stata version. restrict years teacher data, use () original data value-added estimates appended. return_cfr_test_only Default FALSE. TRUE, return coefficient standard error cfr_test result. Useful checking bias many different specifications without hold resulting set tv estimates memory.","code":""},{"path":"https://brbackes.github.io/vamR/reference/vam.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Teacher Value-Added — vam","text":"dataframe list depending return_df_only return_cfr_test_only.","code":""},{"path":"https://brbackes.github.io/vamR/reference/vam.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate Teacher Value-Added — vam","text":"","code":"# \\donttest{ try({ returned <- vam(   by = c(\"lvl\", \"subject\"),    data = df_prepped,    controls = controls,    teacher = \"mepid\",   class = \"section_id\",   year = \"syear\",   tfx_resid = \"mepid\",    driftlimit = 7,   y = \"test\",   return_df_only = FALSE,   tv_name = \"tv\",   scores_name = \"score_r\" ) }) #> ── VAM estimation ─────────────────────────────────── vamR version 0.0.0.9009 ── #> ℹ Initial function checks. #> ✖ Initial function checks. [23ms] #>  #> Error in eval(expr, envir, enclos) : object 'df_prepped' not found # }"},{"path":"https://brbackes.github.io/vamR/news/index.html","id":"vamr-0009009","dir":"Changelog","previous_headings":"","what":"vamR 0.0.0.9009","title":"vamR 0.0.0.9009","text":"Fixed error caused driftlimit specified","code":""},{"path":"https://brbackes.github.io/vamR/news/index.html","id":"vamr-0009008","dir":"Changelog","previous_headings":"","what":"vamR 0.0.0.9008","title":"vamR 0.0.0.9008","text":"Sped VAM step using Rcpp Implemented quasi additional tests ensure identical output Stata’s quasi Additional speed improvements VAM step Implemented cfr_test perform CFR test report result","code":""}]
